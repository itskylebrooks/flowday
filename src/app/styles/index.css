@import "tailwindcss";

/* Motion tokens: centralize page-switch timing and easing so transitions are consistent */
:root {
	--motion-page-duration: .32s; /* standard duration for page switching */
	--motion-page-ease: cubic-bezier(.4,0,.2,1);
}

/* Poster typography */
/* Legacy poster font utility (kept for backward compatibility) */
.font-poster { font-family: 'Bebas Neue', 'Source Serif 4', ui-serif, Georgia, serif; letter-spacing: .5px; }
/* Elongated uppercase display for poster captions using tall condensed font */
.poster-label { font-family: 'Bebas Neue', 'Source Serif 4', ui-serif, Georgia, serif; font-weight:700; text-transform:uppercase; letter-spacing:.12em; transform:scaleY(1.06); transform-origin:center; }
/* Subheading under poster date */
.poster-sub { font-family: 'Bebas Neue', 'Source Serif 4', ui-serif, Georgia, serif; font-weight:400; letter-spacing:.18em; font-size:12px; opacity:.75; text-transform:uppercase; }
/* Monospace bold font for cassette text */
.font-tape { font-family: 'IBM Plex Mono', SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace; font-weight:600; letter-spacing:0.5px; }
/* Song input styling */
.song-input { background:transparent; border:0; border-bottom:1px solid rgba(255,255,255,0.15); padding:6px 0 8px; width:100%; font-size:13px; color:rgba(255,255,255,0.75); outline:none; }
.song-input:focus { border-color:rgba(255,255,255,0.4); }
.song-input::placeholder { color:rgba(255,255,255,0.35); }
.song-input[disabled] { opacity:.4; cursor:not-allowed; }
.song-inputs { animation: fadeSlide .35s ease; }
@keyframes fadeSlide { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }

/* Cassette sticker (paper label) */
.cassette-sticker { background:linear-gradient(135deg,#f9f3e5,#ead9b9); border:1px solid rgba(140,110,60,0.35); border-radius:4px; box-shadow:0 1px 3px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,245,0.5); }
.cassette-sticker:before { content:''; position:absolute; inset:0; pointer-events:none; border-radius:4px; background:linear-gradient(180deg,rgba(255,250,240,0.75),rgba(255,250,240,0.05)); mix-blend-mode:overlay; opacity:0.65; }
.cassette-sticker { position:relative; }
/* Cassette sticker writing lines */
.cassette-sticker .cassette-row { position:relative; padding-bottom:3px; }
.cassette-sticker .cassette-row:after { content:''; position:absolute; left:0; right:0; bottom:0; height:1px; background:rgba(0,0,0,0.32); }
.cassette-sticker .cassette-row.artist-row:after { background:rgba(0,0,0,0.28); }
/* Echoes year transition: slide in from the right (cassette cards) */
@keyframes echoesYearIn { from { opacity:0; transform:translateX(12px); } to { opacity:1; transform:translateX(0); } }
.echoes-year-anim { animation: echoesYearIn .45s cubic-bezier(.4,0,.25,1); }
/* Cassette preview reels */
.cassette-preview:before { content:""; position:absolute; inset:0; background:repeating-linear-gradient(45deg,rgba(255,255,255,0.04)_0_6px,rgba(0,0,0,0.04)_6px_12px); mix-blend-mode:overlay; opacity:.35; pointer-events:none; }
@keyframes reelSpin { from { transform:translate(-50%, -50%) rotate(0deg); } to { transform:translate(-50%, -50%) rotate(360deg); } }
.reel-spin { position:absolute; width:96px; height:96px; top:50%; transform:translate(-50%, -50%) rotate(0deg); animation: reelSpin 18s linear infinite; will-change:transform; }
.reel-left { left:22%; }
.reel-right { left:78%; }
.reel-right.reel-spin { animation-duration:22s; }
.reel-svg { width:96px; height:96px; display:block; }

/* Poster meta fade/slide */
.poster-meta { opacity:0; transform:translateY(6px) scale(.97); max-height:0; overflow:hidden; transition: opacity .38s cubic-bezier(.4,0,.2,1), transform .42s cubic-bezier(.4,0,.2,1), max-height .45s ease; }
.poster-meta.active { opacity:1; transform:translateY(0) scale(1); max-height:220px; }

/* Camera flash effect */

/* App shell sizing */
html, body, #root { height: 100%; overflow: hidden; overscroll-behavior: none; }
body { margin: 0; position: fixed; inset: 0; width: 100%; }
/* Anchor the React root to the viewport to eliminate page scrolling */
#root { position: fixed; inset: 0; }

/* Ensure the app grid uses full safe viewport height (iOS friendly) */
.app-viewport {
	height: 100svh; /* use small viewport height to avoid iOS address bar expand */
	overflow: hidden;
	touch-action: none; /* prevent scroll and pull-to-refresh */
}

/* Page & element transition helpers */
@keyframes fadeInMove {
	from { opacity: 0; transform: translateY(8px); }
	to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeSwap {
	from { opacity: 0; transform: translateX(6px); }
	to { opacity: 1; transform: translateX(0); }
}
/* Use centralized page motion tokens for consistency */
.animate-fadeInMove { animation: fadeInMove var(--motion-page-duration) var(--motion-page-ease) both; }
.animate-fadeSwap { animation: fadeSwap var(--motion-page-duration) var(--motion-page-ease) both; }
/* Longer, smoother day-switch animation for emoji/aura (matches aura/triangle timing) */
.animate-emoji-day-swap { animation: fadeSwap 0.62s cubic-bezier(.4,0,.2,1) both; }

/* When doing a day swap, extend inner transitions for triangle and aura to match */
.emoji-trans-container.animate-emoji-day-swap .triangle-view { transition: transform .65s cubic-bezier(.4,0,.2,1), opacity .65s ease; }
.emoji-trans-container.animate-emoji-day-swap .aura-view { transition: transform .72s cubic-bezier(.4,0,.2,1), opacity .68s ease; }

/* Header/date: fade in from top (used for top nav title swaps) */
@keyframes fadeFromTop {
	from { opacity: 0; transform: translateY(-6px); }
	to { opacity: 1; transform: translateY(0); }
}
.animate-fadeFromTop { animation: fadeFromTop var(--motion-page-duration) var(--motion-page-ease) both; }

/* Guide step transitions */
@keyframes guideEnterForward { from { opacity:0; transform:translateX(26px) scale(.985); } to { opacity:1; transform:translateX(0) scale(1); } }
@keyframes guideExitForward { from { opacity:1; transform:translateX(0) scale(1); } to { opacity:0; transform:translateX(-24px) scale(.985); } }
@keyframes guideEnterBack { from { opacity:0; transform:translateX(-26px) scale(.985); } to { opacity:1; transform:translateX(0) scale(1); } }
@keyframes guideExitBack { from { opacity:1; transform:translateX(0) scale(1); } to { opacity:0; transform:translateX(24px) scale(.985); } }
.guide-step-layer { position:absolute; inset:0; }
.guide-step-enter-forward { animation: guideEnterForward .38s cubic-bezier(.4,0,.2,1); }
.guide-step-exit-forward { animation: guideExitForward .32s cubic-bezier(.4,0,.55,1) forwards; }
.guide-step-enter-back { animation: guideEnterBack .38s cubic-bezier(.4,0,.2,1); }
.guide-step-exit-back { animation: guideExitBack .32s cubic-bezier(.4,0,.55,1) forwards; }

.page-stack { position: relative; width:100%; height:100%; }
.page-view { position:absolute; inset:0; opacity:0; pointer-events:none; transition: opacity var(--motion-page-duration) var(--motion-page-ease), transform var(--motion-page-duration) var(--motion-page-ease); }
/* Directional offsets for incoming page animation */
.page-view.from-left { transform: translateX(-14px); }
.page-view.from-right { transform: translateX(14px); }
.page-view[data-active='true'] { opacity:1; pointer-events:auto; transform:translateX(0); }

/* Aura <-> Emoji triangle smooth morph */
.emoji-trans-container { position:relative; }
.emoji-trans-container .triangle-view,
.emoji-trans-container .aura-view { will-change: transform, opacity; }
.emoji-trans-container .triangle-view { transition: transform .55s cubic-bezier(.4,0,.2,1), opacity .5s ease; transform-origin:50% 50%; }
.emoji-trans-container .aura-view { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; transition: transform .6s cubic-bezier(.4,0,.2,1), opacity .55s ease; transform-origin:50% 50%; }
.emoji-trans-container .triangle-view { opacity:1; transform:scale(1); }
.emoji-trans-container .aura-view { opacity:0; transform:scale(.2); pointer-events:none; }
.emoji-trans-container.aura-active .triangle-view { opacity:0; transform:scale(.3); pointer-events:none; }
.emoji-trans-container.aura-active .aura-view { opacity:1; transform:scale(1); pointer-events:auto; }

/* Song editor overlay animations (Telegram) */
@keyframes songEditorIn { from { opacity:0; transform:translateY(28px) scale(.97); } to { opacity:1; transform:translateY(0) scale(1); } }
@keyframes songEditorOut { from { opacity:1; transform:translateY(0) scale(1); } to { opacity:0; transform:translateY(30px) scale(.96); } }
.song-editor-overlay { animation: songEditorIn .42s cubic-bezier(.4,0,.2,1); }
.song-editor-overlay.closing { animation: songEditorOut .32s cubic-bezier(.4,0,.55,1) forwards; }

/* Emoji picker modal animations */
@keyframes pickerIn { from { opacity:0; transform: translateY(30px) scale(.96); } to { opacity:1; transform: translateY(0) scale(1); } }
@keyframes pickerOut { from { opacity:1; transform: translateY(0) scale(1); } to { opacity:0; transform: translateY(28px) scale(.95); } }
.picker-panel { animation: pickerIn .38s cubic-bezier(.4,0,.2,1); }
.picker-overlay { animation: fadeInMove .3s ease; }
.picker-panel.closing { animation: pickerOut .28s cubic-bezier(.4,0,.6,1) forwards; }
.picker-overlay.closing { animation: fadeOut .22s ease forwards; }

@keyframes fadeOut { from { opacity:1; } to { opacity:0; } }
@keyframes catIn { from { opacity:0; transform:translateY(6px); } to { opacity:1; transform:translateY(0); } }
.cat-swap { animation: catIn .28s ease; }

/* Flow visualization cross-fade */
@keyframes flowSwapIn { from { opacity:0; transform: translateY(12px) scale(.98); } to { opacity:1; transform: translateY(0) scale(1); } }
.flow-anim { animation: flowSwapIn .45s cubic-bezier(.4,0,.25,1); }

/* Settings modal exit */
@keyframes settingsIn { from { opacity:0; transform:translateY(24px) scale(.96);} to { opacity:1; transform:translateY(0) scale(1);} }
@keyframes settingsOut { from { opacity:1; transform:translateY(0) scale(1);} to { opacity:0; transform:translateY(26px) scale(.95);} }
/* Settings modal animations (tuned for smoother symmetric close) */
.settings-overlay { animation: fadeInMove .32s ease both; }
/* Match overlay fade duration to panel so it doesn't disappear early */
.settings-overlay.closing { animation: fadeOut .28s cubic-bezier(.4,0,.6,1) forwards; }
.settings-panel { animation: settingsIn .42s cubic-bezier(.4,0,.2,1); }
/* Use same easing as overlay for cohesive exit */
.settings-panel.closing { animation: settingsOut .28s cubic-bezier(.4,0,.6,1) forwards; }

/* Constellations interactions (edges only) */
.edge-line { transition: opacity .4s ease, stroke-width .4s ease; opacity:0; }
.edge-line[data-connected='true'] { opacity:.5; }

/* Constellation window redesign */
.fd-constellation-window {
        position: relative;
        display: flex;
        flex-direction: column;
        width: min(100%, 380px);
        border-radius: 26px;
        border: 1px solid rgba(255,255,255,0.12);
        background: linear-gradient(160deg, rgba(68,85,190,0.14), rgba(8,10,24,0.9)) rgba(9,10,20,0.78);
        padding: 16px 18px 20px;
        box-shadow: 0 24px 60px -28px rgba(42,60,135,0.9), inset 0 0 0 1px rgba(255,255,255,0.02);
        backdrop-filter: blur(18px);
        transition: border-color .25s ease, box-shadow .25s ease;
        will-change: transform;
}
@media (min-width: 640px) {
        .fd-constellation-window { width: min(100%, 420px); }
}
.fd-constellation-window:hover {
        border-color: rgba(255,255,255,0.18);
        box-shadow: 0 28px 90px -32px rgba(80,110,240,0.95), inset 0 0 0 1px rgba(255,255,255,0.03);
}
.fd-constellation-window.is-dragging {
        cursor: grabbing;
        border-color: rgba(255,255,255,0.24);
        box-shadow: 0 24px 70px -28px rgba(80,110,240,0.88);
}
.fd-constellation-window__chrome {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
}
.fd-constellation-window__drag {
        display: flex;
        flex: 1;
        gap: 12px;
        align-items: flex-start;
        padding: 10px 12px;
        border-radius: 18px;
        border: 1px solid rgba(255,255,255,0.1);
        background: rgba(255,255,255,0.05);
        cursor: grab;
        touch-action: none;
        transition: border-color .2s ease, background .2s ease;
        outline: none;
}
.fd-constellation-window__drag:hover {
        border-color: rgba(255,255,255,0.18);
        background: rgba(255,255,255,0.09);
}
.fd-constellation-window__drag[data-dragging='true'],
.fd-constellation-window__drag:active {
        cursor: grabbing;
}
.fd-constellation-window__drag:focus-visible {
        outline: 2px solid rgba(255,255,255,0.55);
        outline-offset: 4px;
}
.fd-constellation-window__grab {
        width: 44px;
        height: 6px;
        border-radius: 999px;
        background: linear-gradient(90deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.35), inset 0 -1px 0 rgba(0,0,0,0.28);
        margin-top: 6px;
        flex-shrink: 0;
        align-self: center;
}
.fd-constellation-window__title {
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.28em;
        color: rgba(255,255,255,0.72);
}
.fd-constellation-window__subtitle {
        margin-top: 4px;
        font-size: 0.7rem;
        line-height: 1.35;
        color: rgba(255,255,255,0.5);
        max-width: 220px;
}
.fd-constellation-window__reset {
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.16);
        background: rgba(10,12,24,0.45);
        color: rgba(255,255,255,0.78);
        font-size: 0.7rem;
        font-weight: 500;
        padding: 6px 14px;
        cursor: pointer;
        transition: background .2s ease, border-color .2s ease, color .2s ease;
}
.fd-constellation-window__reset:hover {
        color: #fff;
        border-color: rgba(255,255,255,0.3);
        background: rgba(35,40,72,0.62);
}
.fd-constellation-window__reset:focus-visible {
        outline: 2px solid rgba(255,255,255,0.5);
        outline-offset: 3px;
}
.fd-constellation-window__canvas {
        position: relative;
        border-radius: 20px;
        padding: 16px;
        background: radial-gradient(140% 120% at 50% 0%, rgba(98,128,255,0.18), rgba(8,9,22,0.88)) rgba(6,8,18,0.82);
        border: 1px solid rgba(255,255,255,0.08);
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.05), inset 0 -16px 40px rgba(12,10,36,0.45);
        overflow: hidden;
}
.fd-constellation-window__canvas svg {
        display: block;
        margin: 0 auto;
}
.fd-constellation-window__empty {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
}
.fd-constellation-window__footer {
        margin-top: 14px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
}
@media (min-width: 480px) {
        .fd-constellation-window__footer {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
        }
}
.fd-constellation-window__focus {
        min-height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
}
.fd-constellation-window__focusBadge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,0.18);
        background: rgba(0,0,0,0.45);
        padding: 4px 12px;
        color: rgba(255,255,255,0.8);
        font-size: 0.75rem;
        backdrop-filter: blur(10px);
}
.fd-constellation-window__focusBadge span:first-child {
        font-size: 1.05rem;
}
.fd-constellation-window__focusPlaceholder {
        visibility: hidden;
}
.fd-constellation-controls {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
}
.fd-constellation-controls button {
        width: 46px;
        height: 46px;
        border-radius: 14px;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.07);
        color: rgba(255,255,255,0.86);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background .2s ease, border-color .2s ease, transform .2s ease;
        touch-action: manipulation;
}
.fd-constellation-controls button:hover {
        background: rgba(255,255,255,0.12);
        border-color: rgba(255,255,255,0.24);
        color: #fff;
}
.fd-constellation-controls button:active {
        transform: scale(0.97);
        background: rgba(255,255,255,0.18);
}
.fd-constellation-controls button:focus-visible {
        outline: 2px solid rgba(255,255,255,0.45);
        outline-offset: 3px;
}
.fd-constellation-controls svg {
        width: 22px;
        height: 22px;
}
.fd-constellation-controls[data-size='sm'] button {
        width: 40px;
        height: 40px;
        border-radius: 12px;
}
.fd-constellation-controls[data-size='sm'] svg {
        width: 18px;
        height: 18px;
}

/* Utility: hide scrollbars (used for emoji picker category row) */
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
.no-scrollbar::-webkit-scrollbar { display: none; }
